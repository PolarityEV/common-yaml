# Polarity Error Code Definitions
# Single source of truth for error codes across all platforms
# Supports: C (STM32), C (ESP32), Dart (Flutter)
#
# Version 2.19.0 - Debug Error Level and 12V Tender Debug Codes (2025-11-17)
# NEW: Added debug error severity level (0x8000-0xFFFF range, MSB=1 for easy filtering)
# NEW: Added 12V tender debug error codes (0x8000-0x8006) for interlock diagnostics
# - DEBUG_VOLT12_TENDER_IGNITION_ON: Ignition preventing 12V tender charging
# - DEBUG_VOLT12_TENDER_HV_CHARGING: HV charging active blocking 12V tender
# - DEBUG_VOLT12_TENDER_CHARGEPORT_TIMEOUT: Charge port communication timeout
# - DEBUG_VOLT12_TENDER_CHARGEPORT_NOT_DETECTED: Charge port not found on CAN bus
# - DEBUG_VOLT12_TENDER_DCDC_NULL: DCDC charger pointer is NULL
# - DEBUG_VOLT12_TENDER_DCDC_NOT_DETECTED: DCDC not responding on CAN bus
# - DEBUG_VOLT12_TENDER_VOLTAGE_ABOVE_THRESHOLD: 12V voltage above start threshold
# REASON: Enable detailed interlock diagnostics without cluttering production error logs
# IMPACT: Debug errors can be toggled via UART DEBUG_CONTROL command (default: ON for development)
# MIGRATION: Error buffer filters debug errors (>= 0x8000) when DebugErrorsEnabled=0
#
# Version 2.18.0 - 12V Battery Tender Diagnostic Error Codes (2025-11-17)
# NEW: Added 12V tender diagnostic error codes (0x00EC-0x00F0) for Phase 7 implementation
# - VOLT12_TENDER_BLOCKED_INTERLOCKS: Safety interlocks preventing charging (info)
# - VOLT12_TENDER_DCDC_UNAVAILABLE: DCDC charger not detected via CAN (warning)
# - VOLT12_TENDER_DCDC_NOT_RESPONDING: DCDC enabled but not charging after 30s (error)
# - VOLT12_TENDER_VOLTAGE_MEASUREMENT_FAULT: Voltage reading implausible (warning)
# - VOLT12_TENDER_COOLDOWN_BYPASS_CRITICAL: Emergency bypass due to critical voltage (warning)
# REASON: Enable comprehensive diagnostics for 12V battery maintenance to prevent deep discharge
# IMPACT: Improved troubleshooting for 12V tender failures that could lead to system failure
#
# Version 2.17.0 - LDU Parameter Tuning Error Codes (2025-11-14)
# NEW: Added LDU parameter tuning error codes (0x00E8-0x00EA) for Phase 6 implementation
# - LDU_SDO_TIMEOUT: CANopen SDO write timeout (>500ms, 3 retries failed)
# - LDU_PARAM_WRITE_FAILED: SDO abort or verification mismatch
# - LDU_INIT_FAILED: Tuning module initialization failure
# REASON: Enable diagnostics for drive mode switching, speed limiting, and valet mode
# IMPACT: Improved troubleshooting for LDU parameter tuning via CANopen SDO
#
# Version 2.16.0 - Odometer and Range Estimation Diagnostics (2025-11-14)
# NEW: Added odometer/range estimation error codes (0x00E4-0x00E6) for diagnostics
# - ODOMETER_RPM_OVERFLOW_DETECTED: RPM accumulator overflow (warning)
# - ODOMETER_DISTANCE_SANITY_CHECK_FAILED: Implausible distance rejected (info)
# - ODOMETER_RANGE_ESTIMATE_UNAVAILABLE: Insufficient data for range calc (info)
# REASON: Enable monitoring of odometer health and range estimation data quality
# IMPACT: Improved troubleshooting for odometer tracking and range accuracy
#
# Version 2.15.0 - STM32 Charge Controller Fault Codes (2025-11-10)
# NEW: Added STM32 charge controller fault codes (0x00D4-0x00D9) for hardware-level diagnostics
# - J1772_CP_VOLTAGE_FAULT: CP voltage out of range (hardware measurement fault)
# - J1772_PP_VOLTAGE_FAULT: PP voltage out of range (hardware measurement fault)
# - J1772_AC_DETECTION_FAULT: AC detection circuit fault (L1/L2 inconsistency)
# - J1772_PWM_FAULT: PWM duty/frequency measurement fault
# - J1772_VCU_KEEPALIVE_TIMEOUT: VCU keepalive timeout reported by charge controller
# - J1772_CROSS_VALIDATION_FAULT: CP/PP cross-validation failure
# REASON: Enable precise troubleshooting of charge port hardware faults reported via CAN
# IMPACT: Improved diagnostics for J1772 charge port issues, replaces generic error reuse
#
# Version 2.14.0 - Charging Pre-Start Safety Gates (2025-11-09)
# NEW: Added pre-start safety gate error codes (0x00D0-0x00D3) to block unsafe charging attempts
# - CHARGING_BLOCKED_BMS_NOT_SAFE: BMS ChargeAllowed=0 (overvoltage, undervoltage, data fault)
# - CHARGING_BLOCKED_VEHICLE_NOT_STATIONARY: Vehicle moving (RPM detected)
# - CHARGING_BLOCKED_NOT_NEUTRAL: Ignition ON while in gear
# - CHARGING_BLOCKED_CHARGER_TIMEOUT: Charger not responding or hardware fault
# REASON: Prevent state machine from advancing to CONTACTORS_CLOSE when safety conditions not met
# IMPACT: Earlier fault detection, clearer error reporting, prevents unsafe charging attempts
#
# Version 2.13.0 - SafetyMonitor Specific Error Codes (2025-11-09)
# NEW: Added SafetyMonitor-specific error codes (0x00CC-0x00CF) for detailed troubleshooting
# - CHARGING_SAFETY_J1772_TIMEOUT: J1772 timeout during active charging
# - CHARGING_SAFETY_BMS_CRITICAL_FAULT: BMS fault during charging
# - CHARGING_SAFETY_IMD_FAULT: IMD isolation fault during charging
# - CHARGING_SAFETY_EMERGENCY_SHUTDOWN: Emergency shutdown trigger confirmation
# REASON: Enable precise identification of which SafetyMonitor check failed during charging
# IMPACT: Improved troubleshooting and diagnostics for charging safety failures
#
# Version 2.12.0 - Ignition Safety Logic Refactor (2025-11-08)
# BREAKING CHANGE: Charging safety logic changed to (Ignition OFF) OR (Neutral)
# - REMOVED: POLARITY_ERR_CHARGER_IGNITION_ON (0x0056) - no longer used
# - UPDATED: POLARITY_ERR_CHARGER_NOT_NEUTRAL (0x0057) - now only fires if (Ignition ON AND in gear)
# - NEW: gpio_utils.c/h - Shared GPIO reading utilities (direct GPIO reads, no caching)
# - IMPROVEMENT: Charger safety now reads ignition GPIO directly (eliminates stale data issues)
# REASON: Enable climate/entertainment during charging, fix 0x0056 false positive
# SAFETY: Still blocks charging if ignition ON AND in gear (Forward/Reverse)
#
# Version 2.11.0 - Single-OBC Fault Tolerance (2025-11-08) [SUPERSEDED by v2.12.0]
# NEW: Added per-OBC failure diagnostics (0x0051, 0x0052)
# - CHARGER_CAN2_OBC_NOT_RESPONDING: OBC on CAN2 not charging (warning, allows single-OBC operation)
# - CHARGER_CAN3_OBC_NOT_RESPONDING: OBC on CAN3 not charging (warning, allows single-OBC operation)
# - Charging continues if at least ONE OBC responds (graceful degradation)
# NEW: Added CHARGING_EVSE_AC_DROPOUT error code (0x00B8)
# - Differentiates AC dropout from OBC hardware failure during initialization
# - Helps diagnose EVSE relay issues vs OBC faults
# IMPROVEMENT: Charge-complete hysteresis added (100mV) to prevent restart oscillation
# - SafetyFaultLatched now set on OBC init timeout (prevents retry loop)
# REASON: Improved diagnostics, fault tolerance, and robustness for charging state machine
#
# Version 2.10.0 - Charging Diagnostics & Hysteresis (2025-11-08) [SUPERSEDED by v2.11.0]
#
# Version 2.9.0 - Charging State Machine v2.1 (No Precharge) (2025-11-07)
# BREAKING CHANGE: Removed precharge-related error codes (hardware not present)
# - REMOVED: CHARGING_PRECHARGE_RELAY_FAILED (0x00B0) - No precharge relay in hardware
# - REMOVED: CHARGING_PRECHARGE_TIMEOUT (0x00B1) - No precharge sequence in v2.1
# - REMOVED: CHARGING_DC_BUS_UNSTABLE (0x00B3) - DC bus stability check removed (direct contactor connection)
# - UPDATED: Contactor settling time increased from 500ms to 1000ms to compensate for lack of precharge
# REASON: Hardware does not have precharge relay or DC bus monitoring circuitry
# IMPACT: State machine reduced from 15 states to 13 states (removed PRECHARGE_START, PRECHARGE_ACTIVE)
# MIGRATION: STM32 firmware and ESP32 gateway must regenerate error headers from updated definitions.yaml
#
# Version 2.8.0 - Charging State Machine v2.0 Error Codes (2025-11-07) [SUPERSEDED by v2.9.0]
# NEW: Added charging state machine v2.0 error codes (0x00AC-0x00B7, 12 codes)
# - CHARGING_BMS_NOT_READY: BMS readiness timeout
# - CHARGING_USER_AUTH_TIMEOUT: User authorization timeout
# - CHARGING_CP_VALIDATION_FAILED: CP signal validation failure
# - CHARGING_MIN_CURRENT_TOO_LOW: EVSE current below minimum
# - CHARGER_CONTACTOR_CLOSE_FAILED: Main contactor feedback failure
# - CHARGING_CP_STATE_C_TIMEOUT: CP State C transition timeout
# - CHARGING_EVSE_NO_AC_POWER: EVSE AC energization timeout
# - CHARGING_OBC_INIT_FAILED: On-board charger initialization failure
# - CHARGING_SHUTDOWN_TIMEOUT: Graceful shutdown timeout
# REASON: Support comprehensive charging state machine with permission and shutdown sequences
# NOTE: Originally included precharge error codes 0x00B0, 0x00B1, 0x00B3 - removed in v2.9.0
#
# Version 2.7.0 - Hardware-Agnostic Error Codes (2025-11-01)
# BREAKING CHANGE: Error codes renamed to hardware-agnostic terminology
# - RENAMED: ESP32_* → GATEWAY_* (6 error codes: 0x0080-0x0087)
# - RENAMED: Source ID "ESP32_GATEWAY" → "BLE_GATEWAY"
# - RENAMED: Category "BLE" → "GATEWAY"
# - UPDATED: All error descriptions to remove hardware-specific names (RP2350, ESP32, etc.)
# REASON: Support future hardware revisions without firmware changes
# IMPACT: ESP32 firmware update REQUIRED (error code names changed)
# MIGRATION: Regenerate polarity_errors.h/.dart from updated definitions.yaml
#
# Version 2.6.0 - CAN-Bus-Based Error Code Refactoring (2025-10-30)
# BREAKING CHANGE: All component error codes now use CAN bus identification
# - RENAMED: CHARGER1_* → CHARGER_CAN2_* (charger on CAN2 bus)
# - RENAMED: CHARGER2_* → CHARGER_CAN3_* (charger on CAN3 bus)
# - ADDED: CHARGER_CAN1_* error codes (reserved for future hardware)
# - RENAMED: CURRENT_SENSOR_* → CURRENT_SENSOR_CAN3_* (sensor on CAN3)
# - RENAMED: IMD_* → IMD_CAN3_* (IMD on CAN3 bus)
# - ADDED: IMD_CAN2_* error codes (0x00A2-0x00A6, reserved for future hardware)
# - ADDED: IMD_CAN1_* error codes (0x00A7-0x00AB, reserved for future hardware)
# REASON: CAN bus topology provides clearer identification than arbitrary instance numbers
# IMPACT: ESP32 firmware update REQUIRED (error code names changed)
# MIGRATION: Component detection system gates timeout errors for missing hardware
#
# Version 2.5.0 - Insulation Monitoring Device (IMD) Support (2025-10-29)
# NEW: Added IMD error codes (0x009D-0x00A1) for insulation monitoring
# - IMD_TIMEOUT: Communication timeout (>1s)
# - IMD_ISOLATION_ALARM: Critical isolation fault (R_iso < 100kΩ)
# - IMD_ISOLATION_WARNING: Isolation warning (R_iso < 500kΩ)
# - IMD_DEVICE_ERROR: Device fault or initialization stuck
# - IMD_CONNECTION_FAILURE: HV+/HV-/Earth connection fault
# REASON: Mandatory safety device for monitoring HV system isolation to chassis
# INTEGRATION: IMD on CAN3 @ 500 kbps, IMD_Info_General @ 100ms
#
# Version 2.4.1 - Remove Diagnostic Control Watchdog (2025-10-25)
# CHANGE: Removed 5-second diagnostic control watchdog (caused unwanted resets)
# - REMOVED: VCU_DIAGNOSTIC_CONTROL_TIMEOUT error code (0x0095)
# - REMOVED: DiagnosticControlLastWriteMs timestamp tracking
# - REMOVED: Watchdog check in GenericVCUTask
# - REASON: Diagnostic controls should persist until explicitly changed by app
# - IMPACT: Controls no longer auto-reset after 5 seconds of inactivity
#
# Version 2.4.0 - Hardware Cleanup (2025-10-25)
# CHANGE: Removed unused timer error codes after gauge cluster externalization
# - REMOVED: TIM2, TIM3, TIM11, TIM13 error codes (0x0022, 0x0023, 0x002B, 0x002D)
# - REMOVED: Duplicate TIM5 error code (0x009C) - now at 0x0025 only
# - UPDATED: Timer/UART descriptions now specify actual hardware usage
# - REASON: Gauge cluster moved to external board, timers TIM2/3/11/13 disabled in CubeMX
# - ACTIVE TIMERS: TIM1 (HAL timebase), TIM4 (water pump PWM), TIM5 (air con PWM)
#
# Version 2.3.0 - Simplified System Diagnostics
# CHANGE: Removed IDLE task detection (configUSE_IDLE_HOOK removed from FreeRTOS)
# - REMOVED: SYSTEM_CPU_STATS_FAILED error code (0x007B) - IDLE task tracking no longer used
# - REASON: CubeMX middleware doesn't expose IDLE task, CPU stats unreliable
# - MIGRATION: System diagnostics now reports generic statistics (uptime, heap, task count)
#
# Version 2.2.0 - UART Protocol Migration
# BREAKING CHANGE: I2C protocol replaced with UART protocol (I2C error codes deprecated)
# - REMOVED: All I2C error codes (I2C_*, 0x0001-0x0007, 0x0071, 0x0076, 0x007C-0x0090)
# - NEW: UART protocol error codes (UART_PROTOCOL_*, 0x0091-0x0094)
# - REASON: STM32F413 I2C dual-address silicon bug (ACK not recognized)
# - MIGRATION: VCU Protocol v11.0 uses UART (460800 baud, IDLE detection, length-prefixed messages)

# ============================================================
# Error Code Ranges (Quick Reference)
# ============================================================
# Production Error Codes (0x0000-0x7FFF):
# 0x0008-0x0020: CAN bus errors (initialization, queue, transmission)
# 0x0021-0x00AB: VCU peripherals and system (timers, UART, IMD, etc.)
# 0x0031-0x0041: BMS faults (undervoltage, overvoltage, isolation)
# 0x0042-0x0056: Charger faults (OBC + DCDC, CAN1/CAN2/CAN3)
# 0x0059-0x006C: Motor controller faults (LDU errors from stm32-sine)
# 0x006D-0x007A: Current sensors (CAN1/CAN2/CAN3, timeout/power faults)
# 0x0080-0x0087: BLE Gateway communication (UART bridge errors)
# 0x0088-0x008E: J1772 charge port (safety interlocks, autodetection)
# 0x009C:        Energy tracking (24-hour kWh accumulation overflow)
# 0x009D-0x00A1: Insulation monitoring device (IMD, CAN3)
# 0x00AC-0x00B7: Charging state machine v2.0 (precharge, permission, shutdown)
# 0x00D0-0x00D9: Charging safety gates and STM32 charge controller faults
# 0x00E7-0x00F0: 12V battery tender (automatic 12V maintenance charging)
#
# Debug Error Codes (0x8000-0xFFFF, MSB=1 for filtering):
# 0x8000-0x8006: 12V battery tender debug (interlock diagnostics)
# ============================================================

project_name: "Polarity"
prefix: "POLARITY_ERR"
version: "2.19.0"

# Error Source Tracking (for app team visibility)
sources:
  - id: "STM32_VCU"
    description: "STM32 Vehicle Control Unit"
    location: "Main VCU firmware"

  - id: "LDU_MOTOR"
    description: "Large Drive Unit Motor Controller"
    location: "stm32-sine firmware (temporary)"
    note: "Will be replaced by STM32-HAL-LDU in future"

  - id: "BLE_GATEWAY"
    description: "BLE Gateway"
    location: "BLE Gateway firmware"

# Error codes are now 16-bit with sequential numbering
# Format: Explicit hexadecimal strings (e.g., "0x0001")
# Range: 0x0000-0xFFFF (0-65535)
categories:
  CAN:
    description: "CAN bus communication and peripheral errors"
    source: "STM32_VCU"
    errors:
      - name: "CAN1_INIT"
        code: "0x0008"
        description: "CAN1 initialization failed"
        severity: "critical"

      - name: "CAN2_INIT"
        code: "0x0009"
        description: "CAN2 initialization failed"
        severity: "critical"

      - name: "CAN3_INIT"
        code: "0x000A"
        description: "CAN3 initialization failed"
        severity: "critical"

      - name: "CAN1_FILTER"
        code: "0x000B"
        description: "CAN1 filter configuration failed"
        severity: "error"

      - name: "CAN2_FILTER"
        code: "0x000C"
        description: "CAN2 filter configuration failed"
        severity: "error"

      - name: "CAN3_FILTER"
        code: "0x000D"
        description: "CAN3 filter configuration failed"
        severity: "error"

      - name: "CAN1_EN"
        code: "0x000E"
        description: "CAN1 enable/start failed"
        severity: "critical"

      - name: "CAN2_EN"
        code: "0x000F"
        description: "CAN2 enable/start failed"
        severity: "critical"

      - name: "CAN3_EN"
        code: "0x0010"
        description: "CAN3 enable/start failed"
        severity: "critical"

      - name: "CAN1_NOTIFICATION"
        code: "0x0011"
        description: "CAN1 notification activation failed"
        severity: "error"

      - name: "CAN2_NOTIFICATION"
        code: "0x0012"
        description: "CAN2 notification activation failed"
        severity: "error"

      - name: "CAN3_NOTIFICATION"
        code: "0x0013"
        description: "CAN3 notification activation failed"
        severity: "error"

      - name: "CAN_RX_FIFO0"
        code: "0x0014"
        description: "CAN RX FIFO0 error"
        severity: "warning"

      - name: "CAN_RX_FIFO1"
        code: "0x0015"
        description: "CAN RX FIFO1 error"
        severity: "warning"

      - name: "CAN_RX_MSG"
        code: "0x0016"
        description: "CAN receive message failed"
        severity: "error"

      - name: "CAN_QUEUE_FULL"
        code: "0x0017"
        description: "CAN message queue overflow (messages dropped)"
        severity: "error"

      - name: "CAN1_RX_MSG"
        code: "0x0018"
        description: "CAN1 receive message failed"
        severity: "error"

      - name: "CAN2_RX_MSG"
        code: "0x0019"
        description: "CAN2 receive message failed"
        severity: "error"

      - name: "CAN3_RX_MSG"
        code: "0x001A"
        description: "CAN3 receive message failed"
        severity: "error"

      - name: "CAN4_RX_MSG"
        code: "0x001B"
        description: "CAN4 receive message failed (reserved for future hardware)"
        severity: "error"

      - name: "CAN5_RX_MSG"
        code: "0x001C"
        description: "CAN5 receive message failed (reserved for future hardware)"
        severity: "error"

      - name: "CAN_RESERVED"
        code: "0x001D"
        description: "Reserved for future CAN errors"
        severity: "info"

      - name: "CAN1_TX_MSG"
        code: "0x001E"
        description: "CAN1 transmit failed (mailbox full or bus error)"
        severity: "error"

      - name: "CAN2_TX_MSG"
        code: "0x001F"
        description: "CAN2 transmit failed (mailbox full or bus error)"
        severity: "error"

      - name: "CAN3_TX_MSG"
        code: "0x0020"
        description: "CAN3 transmit failed (mailbox full or bus error)"
        severity: "error"

      - name: "CHARGER_CAN2_TX_FAIL"
        code: "0x0044"
        description: "Charger on CAN2 transmission failed"
        severity: "warning"

      - name: "CHARGER_CAN3_TX_FAIL"
        code: "0x0049"
        description: "Charger on CAN3 transmission failed"
        severity: "warning"

      - name: "CHARGER_CAN1_TX_FAIL"
        code: "0x004E"
        description: "Charger on CAN1 transmission failed [Reserved for future hardware]"
        severity: "warning"

      - name: "CHARGER_RESERVED_TX_FAIL"
        code: "0x0053"
        description: "Charger 4 CAN transmission failed [Reserved]"
        severity: "warning"

  VCU:
    description: "Vehicle Control Unit peripheral and system errors (UART, TIM, system-level)"
    source: "STM32_VCU"
    errors:
      # ============================================================================
      # DEPRECATED I2C ERROR CODES (v2.1.0 and earlier)
      # Reserved for backward compatibility - DO NOT REUSE
      # Reason: STM32F413 I2C dual-address silicon bug (replaced with UART protocol v11.0)
      # ============================================================================
      # 0x0001-0x0007: I2C basic errors (SLAVE_TX, SLAVE_RX, LISTEN, ERR_CBK, TX_CPLT, RX_CPLT, ENABLE)
      # 0x0071: I2C_BUSY_TIMEOUT
      # 0x0076: I2C_DMA_NOT_READY
      # 0x007C-0x007D: I2C_DMA_RX_UNDERRUN, I2C_DMA_RX_OVERRUN
      # 0x0087-0x0090: I2C protocol and recovery errors
      # ============================================================================

      # ============================================================================
      # UART PROTOCOL V11.0 ERROR CODES (NEW in v2.2.0)
      # ============================================================================
      - name: "UART_PROTOCOL_INIT"
        code: "0x0091"
        description: "UART protocol v11.0 initialization failed (DMA start failed)"
        severity: "critical"

      - name: "UART_RX_OVERFLOW"
        code: "0x0092"
        description: "UART RX buffer overflow or DMA error"
        severity: "error"

      - name: "UART_INVALID_LENGTH"
        code: "0x0093"
        description: "UART message length mismatch (declared vs actual)"
        severity: "error"

      - name: "UART_INVALID_COMMAND"
        code: "0x0094"
        description: "UART unknown command received (not in dispatch table)"
        severity: "error"

      # ============================================================================
      # VCU DIAGNOSTIC CONTROL ERROR CODES (NEW in v2.4.0)
      # ============================================================================
      # 0x0095: VCU_DIAGNOSTIC_CONTROL_TIMEOUT - Removed in v2.4.1 (watchdog removed)
      #         No longer needed - diagnostic controls persist until changed by app

      - name: "VCU_DIAGNOSTIC_CONTACTOR_DENIED"
        code: "0x0096"
        description: "Diagnostic contactor enable denied (charging fault state active)"
        severity: "warning"

      - name: "VCU_DIAGNOSTIC_WPUMP_DUTY_INVALID"
        code: "0x0097"
        description: "Diagnostic water pump duty invalid (must be 0-100%)"
        severity: "warning"

      # ============================================================================
      # TIMER ERROR CODES (Active timers only)
      # TIM1: FreeRTOS HAL timebase (shares TIM1_UP_TIM10_IRQn vector)
      # TIM4: Water pump PWM (CH3, 100Hz, PD14)
      # TIM5: Air conditioning PWM (CH4, 150Hz, PA3)
      # Note: TIM2/3/10/11/13 removed in hardware cleanup (2025-10-25)
      # ============================================================================
      - name: "HAL_TIMEBASE_INIT"
        code: "0x0021"
        description: "FreeRTOS HAL timebase initialization failed (TIM1_UP_TIM10_IRQn)"
        severity: "critical"

      - name: "TIM4"
        code: "0x0024"
        description: "TIM4 PWM initialization failed (water pump control, CH3)"
        severity: "error"

      - name: "TIM5"
        code: "0x0025"
        description: "TIM5 PWM initialization failed (air conditioning control, CH4)"
        severity: "error"

      # ============================================================================
      # UART ERROR CODES (Active UARTs only)
      # UART1: FTDI debug console (PB6/PB7, 115200 baud)
      # UART2: ESP32 gateway protocol v11.0 (PD5/PD6, 460800 baud, DMA)
      # ============================================================================
      - name: "UART1"
        code: "0x002E"
        description: "UART1 operation failed (debug console)"
        severity: "error"

      - name: "UART2"
        code: "0x002F"
        description: "UART2 operation failed (ESP32 gateway protocol)"
        severity: "error"

      - name: "VCU_INIT"
        code: "0x0098"
        description: "VCU initialization failed"
        severity: "critical"

      - name: "FREERTOS_TASK_CREATE"
        code: "0x0099"
        description: "FreeRTOS task creation failed (insufficient heap memory)"
        severity: "critical"

      - name: "MEMORY_ALLOC"
        code: "0x009A"
        description: "Memory allocation failed (malloc returned NULL)"
        severity: "critical"

      - name: "DCDC"
        code: "0x009B"
        description: "DC-DC converter error"
        severity: "critical"

      - name: "ENERGY_OVERFLOW"
        code: "0x009C"
        description: "Energy tracking overflow (hourly accumulator exceeded uint16_t max 65,535 Wh)"
        severity: "warning"

      # ============================================================================
      # I2C EEPROM ERROR CODES (0x00E1-0x00E3)
      # AT34C04 4Kbit EEPROM for persistent configuration storage
      # ============================================================================
      - name: "EEPROM_INIT_FAILED"
        code: "0x00E1"
        description: "I2C EEPROM initialization failed (device not responding on I2C bus)"
        severity: "error"
        note: "Check I2C connections and AT34C04 power - VCU will use default configuration values"

      - name: "EEPROM_READ_FAILED"
        code: "0x00E2"
        description: "I2C EEPROM read operation failed (I2C timeout or bus error)"
        severity: "warning"
        note: "VCU will use default configuration values - check I2C signal integrity"

      - name: "EEPROM_DATA_CORRUPTION"
        code: "0x00E3"
        description: "I2C EEPROM data corruption detected (all 3 redundant copies differ or CRC mismatch)"
        severity: "warning"
        note: "Triple-redundancy failed - VCU will use default configuration and attempt to repair EEPROM data"

      # ============================================================================
      # INSULATION MONITORING DEVICE (IMD) ERROR CODES - CAN-bus-based (v2.5.0+)
      # IMD on CAN3: 0x009D-0x00A1
      # IMD on CAN2: 0x00A2-0x00A6
      # IMD on CAN1: 0x00A7-0x00AB
      # ============================================================================
      - name: "IMD_CAN3_TIMEOUT"
        code: "0x009D"
        description: "IMD on CAN3 communication timeout (>1s no CAN messages)"
        severity: "critical"

      - name: "IMD_CAN3_ISOLATION_ALARM"
        code: "0x009E"
        description: "IMD on CAN3 isolation alarm (R_iso < error threshold, default 100kΩ)"
        severity: "critical"

      - name: "IMD_CAN3_ISOLATION_WARNING"
        code: "0x009F"
        description: "IMD on CAN3 isolation warning (R_iso < warning threshold, default 500kΩ)"
        severity: "warning"

      - name: "IMD_CAN3_DEVICE_ERROR"
        code: "0x00A0"
        description: "IMD on CAN3 device error or stuck in initialization"
        severity: "error"

      - name: "IMD_CAN3_CONNECTION_FAILURE"
        code: "0x00A1"
        description: "IMD on CAN3 connection failure (HV+/HV-/Earth fault detected)"
        severity: "error"

      - name: "IMD_CAN2_TIMEOUT"
        code: "0x00A2"
        description: "IMD on CAN2 communication timeout (>1s no CAN messages) [Reserved for future hardware]"
        severity: "critical"

      - name: "IMD_CAN2_ISOLATION_ALARM"
        code: "0x00A3"
        description: "IMD on CAN2 isolation alarm (R_iso < error threshold, default 100kΩ) [Reserved for future hardware]"
        severity: "critical"

      - name: "IMD_CAN2_ISOLATION_WARNING"
        code: "0x00A4"
        description: "IMD on CAN2 isolation warning (R_iso < warning threshold, default 500kΩ) [Reserved for future hardware]"
        severity: "warning"

      - name: "IMD_CAN2_DEVICE_ERROR"
        code: "0x00A5"
        description: "IMD on CAN2 device error or stuck in initialization [Reserved for future hardware]"
        severity: "error"

      - name: "IMD_CAN2_CONNECTION_FAILURE"
        code: "0x00A6"
        description: "IMD on CAN2 connection failure (HV+/HV-/Earth fault detected) [Reserved for future hardware]"
        severity: "error"

      - name: "IMD_CAN1_TIMEOUT"
        code: "0x00A7"
        description: "IMD on CAN1 communication timeout (>1s no CAN messages) [Reserved for future hardware]"
        severity: "critical"

      - name: "IMD_CAN1_ISOLATION_ALARM"
        code: "0x00A8"
        description: "IMD on CAN1 isolation alarm (R_iso < error threshold, default 100kΩ) [Reserved for future hardware]"
        severity: "critical"

      - name: "IMD_CAN1_ISOLATION_WARNING"
        code: "0x00A9"
        description: "IMD on CAN1 isolation warning (R_iso < warning threshold, default 500kΩ) [Reserved for future hardware]"
        severity: "warning"

      - name: "IMD_CAN1_DEVICE_ERROR"
        code: "0x00AA"
        description: "IMD on CAN1 device error or stuck in initialization [Reserved for future hardware]"
        severity: "error"

      - name: "IMD_CAN1_CONNECTION_FAILURE"
        code: "0x00AB"
        description: "IMD on CAN1 connection failure (HV+/HV-/Earth fault detected) [Reserved for future hardware]"
        severity: "error"

      # ============================================================================
      # DEPRECATED ERROR CODES
      # ============================================================================
      # 0x007B: SYSTEM_CPU_STATS_FAILED - IDLE task detection removed (v2.3.0)
      #         (CubeMX middleware doesn't expose IDLE task, CPU stats unreliable)
      # 0x009C: TIM5 - Duplicate removed (v2.4.0), now at 0x0025 with other timer codes
      # 0x0022-0x0023: TIM2, TIM3 - Removed (v2.4.0), timers disabled in hardware cleanup
      # 0x0026-0x002D: TIM6-TIM13 - Removed (v2.4.0), timers disabled in hardware cleanup
      #         Note: 0x0021 repurposed from TIM1 to HAL_TIMEBASE_INIT (more accurate)
      # ============================================================================

  BMS:
    description: "BMS communication timeouts and battery pack faults"
    source: "STM32_VCU"
    errors:
      - name: "BMS1"
        code: "0x0031"
        description: "BMS1 communication or fault"
        severity: "critical"

      - name: "BMS2"
        code: "0x0032"
        description: "BMS2 communication or fault"
        severity: "critical"

      - name: "BMS1_OVERVOLTAGE"
        code: "0x0033"
        description: "BMS1 cell overvoltage detected (charging stopped)"
        severity: "critical"

      - name: "BMS1_UNDERVOLTAGE"
        code: "0x0034"
        description: "BMS1 cell undervoltage detected (fault condition)"
        severity: "critical"

      - name: "BMS1_EXCESSIVE_DELTA"
        code: "0x0035"
        description: "BMS1 cell voltage imbalance exceeds limit"
        severity: "warning"

      - name: "BMS1_DATA_FAULT"
        code: "0x0036"
        description: "BMS1 data invalid or corrupted (all cells zero)"
        severity: "critical"

      - name: "BMS1_TIMEOUT"
        code: "0x0037"
        description: "BMS1 communication timeout (no response to wake-up signals)"
        severity: "error"

      - name: "BMS2_OVERVOLTAGE"
        code: "0x0038"
        description: "BMS2 cell overvoltage detected (charging stopped)"
        severity: "critical"

      - name: "BMS2_UNDERVOLTAGE"
        code: "0x0039"
        description: "BMS2 cell undervoltage detected (fault condition)"
        severity: "critical"

      - name: "BMS2_EXCESSIVE_DELTA"
        code: "0x003A"
        description: "BMS2 cell voltage imbalance exceeds limit"
        severity: "warning"

      - name: "BMS2_DATA_FAULT"
        code: "0x003B"
        description: "BMS2 data invalid or corrupted (all cells zero)"
        severity: "critical"

      - name: "BMS2_TIMEOUT"
        code: "0x003C"
        description: "BMS2 communication timeout (no response to wake-up signals)"
        severity: "error"

      - name: "BMS3_OVERVOLTAGE"
        code: "0x003D"
        description: "BMS3 cell overvoltage detected (charging stopped)"
        severity: "critical"

      - name: "BMS3_UNDERVOLTAGE"
        code: "0x003E"
        description: "BMS3 cell undervoltage detected (fault condition)"
        severity: "critical"

      - name: "BMS3_EXCESSIVE_DELTA"
        code: "0x003F"
        description: "BMS3 cell voltage imbalance exceeds limit"
        severity: "warning"

      - name: "BMS3_DATA_FAULT"
        code: "0x0040"
        description: "BMS3 data invalid or corrupted (all cells zero)"
        severity: "critical"

      - name: "BMS3_TIMEOUT"
        code: "0x0041"
        description: "BMS3 communication timeout (no response to wake-up signals)"
        severity: "error"

  CHARGER:
    description: "Charger and charging system errors (CAN-bus-based identification)"
    source: "STM32_VCU"
    errors:
      - name: "CHARGER_CAN2_OBC_TIMEOUT"
        code: "0x0042"
        description: "Charger on CAN2 OBC communication timeout (>1s)"
        severity: "error"

      - name: "CHARGER_CAN2_DCDC_TIMEOUT"
        code: "0x0043"
        description: "Charger on CAN2 DCDC communication timeout (>1s)"
        severity: "error"

      - name: "CHARGER_CAN2_OBC_FAULT"
        code: "0x0045"
        description: "Charger on CAN2 OBC hardware or temperature fault"
        severity: "error"

      - name: "CHARGER_CAN2_DCDC_FAULT"
        code: "0x0046"
        description: "Charger on CAN2 DCDC hardware fault"
        severity: "error"

      - name: "CHARGER_CAN3_OBC_TIMEOUT"
        code: "0x0047"
        description: "Charger on CAN3 OBC communication timeout (>1s)"
        severity: "error"

      - name: "CHARGER_CAN3_DCDC_TIMEOUT"
        code: "0x0048"
        description: "Charger on CAN3 DCDC communication timeout (>1s)"
        severity: "error"

      - name: "CHARGER_CAN3_OBC_FAULT"
        code: "0x004A"
        description: "Charger on CAN3 OBC hardware or temperature fault"
        severity: "error"

      - name: "CHARGER_CAN3_DCDC_FAULT"
        code: "0x004B"
        description: "Charger on CAN3 DCDC hardware fault"
        severity: "error"

      - name: "CHARGER_CAN1_OBC_TIMEOUT"
        code: "0x004C"
        description: "Charger on CAN1 OBC communication timeout (>1s) [Reserved for future hardware]"
        severity: "error"

      - name: "CHARGER_CAN1_DCDC_TIMEOUT"
        code: "0x004D"
        description: "Charger on CAN1 DCDC communication timeout (>1s) [Reserved for future hardware]"
        severity: "error"

      - name: "CHARGER_CAN1_OBC_FAULT"
        code: "0x004F"
        description: "Charger on CAN1 OBC hardware or temperature fault [Reserved for future hardware]"
        severity: "error"

      - name: "CHARGER_CAN1_DCDC_FAULT"
        code: "0x0050"
        description: "Charger on CAN1 DCDC hardware fault [Reserved for future hardware]"
        severity: "error"

      - name: "CHARGER_CAN2_OBC_NOT_RESPONDING"
        code: "0x0051"
        description: "Charger on CAN2 OBC receiving commands but not outputting current (may be faulty)"
        severity: "warning"
        note: "OBC is communicating but not charging - allows single-OBC operation with degraded performance"

      - name: "CHARGER_CAN3_OBC_NOT_RESPONDING"
        code: "0x0052"
        description: "Charger on CAN3 OBC receiving commands but not outputting current (may be faulty)"
        severity: "warning"
        note: "OBC is communicating but not charging - allows single-OBC operation with degraded performance"

      - name: "CHARGER_RESERVED_OBC_FAULT"
        code: "0x0054"
        description: "Reserved for additional charger OBC fault"
        severity: "error"

      - name: "CHARGER_RESERVED_DCDC_FAULT"
        code: "0x0055"
        description: "Reserved for additional charger DCDC fault"
        severity: "error"

      - name: "CHARGER_NOT_NEUTRAL"
        code: "0x0057"
        description: "Charging blocked: ignition ON while in gear (must be OFF or in neutral)"
        severity: "critical"
        note: "Charging allowed if ignition OFF OR vehicle in neutral - this error only fires when ignition ON AND in gear (Forward/Reverse)"

      - name: "CHARGER_VEHICLE_MOVING"
        code: "0x0058"
        description: "Charging blocked: vehicle moving (RPM detected)"
        severity: "critical"

  MOTOR:
    description: "Motor controller and LDU errors"
    source: "LDU_MOTOR"
    errors:
      - name: "MOTOR_OVERCURRENT"
        code: "0x0059"
        description: "Motor phase overcurrent detected"
        severity: "critical"
        sine_error_code: 1
        sine_error_name: "ERR_OVERCURRENT"
        sine_error_type: "ERROR_STOP"
        action: "Motor will shut down immediately"

      - name: "MOTOR_THROTTLE1"
        code: "0x005A"
        description: "Throttle sensor 1 fault"
        severity: "warning"
        sine_error_code: 2
        sine_error_name: "ERR_THROTTLE1"
        sine_error_type: "ERROR_DISPLAY"
        action: "Check throttle pedal wiring"

      - name: "MOTOR_THROTTLE2"
        code: "0x005B"
        description: "Throttle sensor 2 fault"
        severity: "warning"
        sine_error_code: 3
        sine_error_name: "ERR_THROTTLE2"
        sine_error_type: "ERROR_DISPLAY"
        action: "Check throttle pedal wiring"

      - name: "MOTOR_CANTIMEOUT"
        code: "0x005C"
        description: "Motor CAN communication timeout"
        severity: "critical"
        sine_error_code: 4
        sine_error_name: "ERR_CANTIMEOUT"
        sine_error_type: "ERROR_STOP"
        action: "Check CAN bus connections"

      - name: "MOTOR_EMCYSTOP"
        code: "0x005D"
        description: "Emergency stop triggered"
        severity: "critical"
        sine_error_code: 5
        sine_error_name: "ERR_EMCYSTOP"
        sine_error_type: "ERROR_STOP"
        action: "Check emergency stop circuit"

      - name: "MOTOR_MPROT"
        code: "0x005E"
        description: "Motor protection fault"
        severity: "critical"
        sine_error_code: 6
        sine_error_name: "ERR_MPROT"
        sine_error_type: "ERROR_STOP"
        action: "Motor protection triggered"

      - name: "MOTOR_DESAT"
        code: "0x005F"
        description: "Desaturation fault"
        severity: "critical"
        sine_error_code: 7
        sine_error_name: "ERR_DESAT"
        sine_error_type: "ERROR_STOP"
        action: "IGBT desaturation detected"

      - name: "MOTOR_OVERVOLTAGE"
        code: "0x0060"
        description: "DC bus overvoltage"
        severity: "critical"
        sine_error_code: 8
        sine_error_name: "ERR_OVERVOLTAGE"
        sine_error_type: "ERROR_STOP"
        action: "DC bus voltage too high"

      - name: "MOTOR_ENCODER"
        code: "0x0061"
        description: "Encoder failure"
        severity: "warning"
        sine_error_code: 9
        sine_error_name: "ERR_ENCODER"
        sine_error_type: "ERROR_DISPLAY"
        action: "Check encoder connections"

      - name: "MOTOR_PRECHARGE"
        code: "0x0062"
        description: "Precharge fault"
        severity: "critical"
        sine_error_code: 10
        sine_error_name: "ERR_PRECHARGE"
        sine_error_type: "ERROR_STOP"
        action: "Precharge circuit failed"

      - name: "MOTOR_TMPHSMAX"
        code: "0x0063"
        description: "Heatsink overtemperature"
        severity: "warning"
        sine_error_code: 11
        sine_error_name: "ERR_TMPHSMAX"
        sine_error_type: "ERROR_DERATE"
        action: "Motor will derate power"

      - name: "MOTOR_CURRENTLIMIT"
        code: "0x0064"
        description: "Current limit active"
        severity: "warning"
        sine_error_code: 12
        sine_error_name: "ERR_CURRENTLIMIT"
        sine_error_type: "ERROR_DERATE"
        action: "Motor power limited"

      - name: "MOTOR_PWMSTUCK"
        code: "0x0065"
        description: "PWM stuck fault"
        severity: "warning"
        sine_error_code: 13
        sine_error_name: "ERR_PWMSTUCK"
        sine_error_type: "ERROR_DISPLAY"
        action: "PWM output failure"

      - name: "MOTOR_HICUROFS1"
        code: "0x0066"
        description: "Current sensor 1 offset high"
        severity: "warning"
        sine_error_code: 14
        sine_error_name: "ERR_HICUROFS1"
        sine_error_type: "ERROR_DISPLAY"
        action: "Calibrate current sensor 1"

      - name: "MOTOR_HICUROFS2"
        code: "0x0067"
        description: "Current sensor 2 offset high"
        severity: "warning"
        sine_error_code: 15
        sine_error_name: "ERR_HICUROFS2"
        sine_error_type: "ERROR_DISPLAY"
        action: "Calibrate current sensor 2"

      - name: "MOTOR_HIRESOFS"
        code: "0x0068"
        description: "High-res encoder offset fault"
        severity: "warning"
        sine_error_code: 16
        sine_error_name: "ERR_HIRESOFS"
        sine_error_type: "ERROR_DISPLAY"
        action: "Calibrate high-res encoder"

      - name: "MOTOR_LORESAMP"
        code: "0x0069"
        description: "Low-res encoder amplitude fault"
        severity: "warning"
        sine_error_code: 17
        sine_error_name: "ERR_LORESAMP"
        sine_error_type: "ERROR_DISPLAY"
        action: "Check encoder signal quality"

      - name: "MOTOR_TMPMMAX"
        code: "0x006A"
        description: "Motor overtemperature"
        severity: "warning"
        sine_error_code: 18
        sine_error_name: "ERR_TMPMMAX"
        sine_error_type: "ERROR_DERATE"
        action: "Motor will derate power"

      - name: "MOTOR_CANCRC"
        code: "0x006B"
        description: "Motor CAN CRC error"
        severity: "critical"
        sine_error_code: 19
        sine_error_name: "ERR_CANCRC"
        sine_error_type: "ERROR_STOP"
        action: "CAN message corrupted"

      - name: "MOTOR_CANCOUNTER"
        code: "0x006C"
        description: "Motor CAN counter mismatch"
        severity: "critical"
        sine_error_code: 20
        sine_error_name: "ERR_CANCOUNTER"
        sine_error_type: "ERROR_STOP"
        action: "CAN message sequence error"

      # ============================================================================
      # LDU PARAMETER TUNING ERROR CODES (Phase 6 implementation)
      # CANopen SDO writes for drive mode switching, speed limiting, valet mode
      # ============================================================================
      - name: "LDU_SDO_TIMEOUT"
        code: "0x00E8"
        description: "LDU CANopen SDO parameter write timeout (>500ms, 3 retries failed)"
        severity: "warning"
        note: "LDU not responding to parameter write via SDO (0x601/0x581). Check CAN bus and LDU firmware version (requires v5.35.R+ for parameter support). Drive modes will use default settings."

      - name: "LDU_PARAM_WRITE_FAILED"
        code: "0x00E9"
        description: "LDU parameter write failed (SDO abort or verification mismatch)"
        severity: "warning"
        note: "LDU rejected parameter write or readback verification failed. Parameter may not be supported in current firmware. Drive modes will continue with last known good values."

      - name: "LDU_INIT_FAILED"
        code: "0x00EA"
        description: "LDU tuning initialization failed (parameter queue full or SDO driver unavailable)"
        severity: "error"
        note: "LDU tuning module failed to initialize - check SDO driver and parameter queue allocation. Drive mode switching disabled."

  SENSOR:
    description: "Sensor errors (current sensors, temperature sensors, etc.) - CAN-bus-based identification"
    source: "STM32_VCU"
    errors:
      - name: "CURRENT_SENSOR_CAN3_TIMEOUT"
        code: "0x006D"
        description: "Current Sensor on CAN3 communication timeout (>1s) [CAN ID 0x3C4]"
        severity: "error"

      - name: "CURRENT_SENSOR_CAN3_INVALID_DATA"
        code: "0x006E"
        description: "Current Sensor on CAN3 reports invalid current reading [CAN ID 0x3C4]"
        severity: "warning"

      - name: "CURRENT_SENSOR_CAN3_OUT_OF_RANGE"
        code: "0x006F"
        description: "Current Sensor on CAN3 out of range (>±1550A) [CAN ID 0x3C4]"
        severity: "warning"

      - name: "CURRENT_SENSOR_CAN3_POWER_FAULT"
        code: "0x0070"
        description: "Current Sensor on CAN3 power fault (under/over voltage or internal error) [CAN ID 0x3C4]"
        severity: "error"

  GATEWAY:
    description: "BLE Gateway communication errors (UART bridge to VCU)"
    source: "BLE_GATEWAY"
    errors:
      - name: "GATEWAY_UART_TIMEOUT"
        code: "0x0080"
        description: "BLE Gateway UART timeout while communicating with VCU"
        severity: "warning"

      - name: "GATEWAY_UART_INVALID_RESPONSE"
        code: "0x0081"
        description: "Gateway received invalid response from VCU (length mismatch)"
        severity: "error"

      - name: "GATEWAY_UART_BUS_ERROR"
        code: "0x0082"
        description: "Gateway UART bus error (TX/RX fault)"
        severity: "error"

      - name: "GATEWAY_BLE_MBUF_ALLOC_FAIL"
        code: "0x0083"
        description: "BLE memory allocation failed (out of memory)"
        severity: "error"

      - name: "GATEWAY_UART_PROTOCOL_ERROR"
        code: "0x0084"
        description: "Gateway UART protocol error (invalid message format)"
        severity: "error"

      - name: "GATEWAY_VCU_WRITE_INVALID_CMD"
        code: "0x0085"
        description: "VCU rejected write command (unknown command ID)"
        severity: "error"
        note: "UART Protocol status 0x01 - check command byte"

      - name: "GATEWAY_VCU_WRITE_INVALID_LENGTH"
        code: "0x0086"
        description: "VCU rejected write command (payload too short)"
        severity: "error"
        note: "UART Protocol status 0x02 - check payload size"

      - name: "GATEWAY_VCU_WRITE_HANDLER_ERROR"
        code: "0x0087"
        description: "VCU rejected write command (validation failed)"
        severity: "warning"
        note: "UART Protocol status 0x03 - params out of range (e.g. duty>100)"

  # ============================================================
  # J1772 CHARGE PORT ERRORS (0x0088-0x008C)
  # ============================================================
  # SAE J1772 Electric Vehicle Coupler safety interlocks
  # Charge port controller monitors J1772 signals
  # CAN ID 0x200 @ 200ms (timeout 500ms = 2.5x period)
  # ============================================================
  J1772:
    description: "J1772 Charge Port safety interlocks"
    source: "STM32_VCU"
    errors:
      - name: "J1772_TIMEOUT"
        code: "0x0088"
        description: "Charge port controller timeout (>500ms)"
        severity: "error"
        note: "Check CAN connection to charge port controller, verify 0x200 message"

      - name: "J1772_INVALID_CP_STATE"
        code: "0x0089"
        description: "J1772 control pilot not in State C (charging not authorized)"
        severity: "error"
        note: "CP state must be C during charging (vehicle ready, EVSE energized)"

      - name: "J1772_PWM_OUT_OF_RANGE"
        code: "0x008A"
        description: "J1772 PWM duty cycle out of valid range (not 10-96%)"
        severity: "error"
        note: "PWM duty encodes EVSE current limit per SAE J1772 spec"

      - name: "J1772_AC_VOLTAGE_MISSING"
        code: "0x008B"
        description: "J1772 AC voltage not detected (EVSE not energized)"
        severity: "error"
        note: "AC voltage must be present for charging (120V or 240V)"

      - name: "J1772_PP_BUTTON_PRESSED"
        code: "0x008C"
        description: "J1772 proximity pilot button pressed (emergency disconnect)"
        severity: "warning"
        note: "User requesting disconnect - ramp down current gracefully"

      - name: "J1772_NOT_DETECTED"
        code: "0x008D"
        description: "J1772 charge port not detected during module detection window"
        severity: "error"
        note: "Charge port hardware missing or charge port controller firmware not running"

      - name: "J1772_VCU_WATCHDOG"
        code: "0x008E"
        description: "Charge port controller watchdog expired (VCU keepalive timeout)"
        severity: "error"
        note: "VCU must transmit CAN 0x201 keepalive every <5 seconds"

      # NEW: v2.0 Charging State Machine Error Codes (0x00AC-0x00B7)
      - name: "CHARGING_BMS_NOT_READY"
        code: "0x00AC"
        description: "BMS not ready to charge within timeout (30 seconds)"
        severity: "error"
        note: "Check BMS communication, safety status, and readiness flags"

      - name: "CHARGING_USER_AUTH_TIMEOUT"
        code: "0x00AD"
        description: "User authorization timeout (60 seconds)"
        severity: "warning"
        note: "User did not authorize charging via mobile app or RFID within timeout"

      - name: "CHARGING_CP_VALIDATION_FAILED"
        code: "0x00AE"
        description: "CP signal validation failed (invalid state or duty cycle)"
        severity: "error"
        note: "CP state must be B with valid PWM duty cycle (10-96%) before charging"

      - name: "CHARGING_MIN_CURRENT_TOO_LOW"
        code: "0x00AF"
        description: "EVSE available current too low (minimum 6.0A required)"
        severity: "error"
        note: "EVSE must provide at least 6.0A for safe charging operation"

      - name: "CHARGING_CONTACTOR_CLOSE_FAILED"
        code: "0x00B2"
        description: "Main contactors failed to close (no feedback within 500ms)"
        severity: "error"
        note: "Check main contactor wiring, coil power, and feedback signals"

      - name: "CHARGING_CP_STATE_C_TIMEOUT"
        code: "0x00B4"
        description: "CP State C transition timeout (J1772 controller did not respond)"
        severity: "error"
        note: "Check J1772 charge enable command (CAN 0x201) and controller response"

      - name: "CHARGING_EVSE_NO_AC_POWER"
        code: "0x00B5"
        description: "EVSE did not energize AC within timeout (10 seconds)"
        severity: "error"
        note: "EVSE may be slow to respond or faulty - check AC detection on charge port"

      - name: "CHARGING_OBC_INIT_FAILED"
        code: "0x00B6"
        description: "On-board charger initialization failed (no charging current within 5 seconds)"
        severity: "error"
        note: "Check OBC communication, AC power, and initialization sequence"

      - name: "CHARGING_SHUTDOWN_TIMEOUT"
        code: "0x00B7"
        description: "Graceful shutdown timeout (5 seconds exceeded)"
        severity: "warning"
        note: "Shutdown sequence took longer than expected - forced termination"

      - name: "CHARGING_EVSE_AC_DROPOUT"
        code: "0x00B8"
        description: "EVSE AC power dropout during OBC initialization (AC disappeared before charging started)"
        severity: "error"
        note: "EVSE relay may be opening due to inrush current or brown-out - check contactor precharge circuit"

      - name: "CHARGING_INVALID_STATE"
        code: "0x00B9"
        description: "Charging state machine entered invalid state (corruption detected)"
        severity: "critical"
        note: "Should never occur - indicates memory corruption or software bug"

      - name: "CHARGING_CP_STATE_LOST"
        code: "0x00BA"
        description: "CP State C lost during active charging (cable disconnect or EVSE fault)"
        severity: "error"
        note: "Cable disconnected or EVSE stopped responding during charge"

      - name: "CHARGING_AC_LOST_DURING_CHARGE"
        code: "0x00BB"
        description: "EVSE AC power lost during active charging (power outage or relay fault)"
        severity: "error"
        note: "Different from init timeout - indicates mid-charge power loss"

      - name: "CHARGING_RETRY_BLOCKED_SAFETY_LATCH"
        code: "0x00BC"
        description: "Charging retry blocked: safety fault latched from previous attempt (disconnect plug to reset)"
        severity: "warning"
        note: "User must disconnect and reconnect plug to clear safety latch and retry"

      # OBC Detailed Fault Codes - CAN2 (Charger 1)
      - name: "CHARGER_CAN2_OBC_AC_INPUT_OVERVOLTAGE"
        code: "0x00BD"
        description: "Charger on CAN2 OBC reports AC input overvoltage fault (>275V AC)"
        severity: "error"
        note: "Check EVSE output voltage - should be 120V or 240V. Charger refusing to charge for safety."

      - name: "CHARGER_CAN2_OBC_TEMPERATURE_FAULT"
        code: "0x00BE"
        description: "Charger on CAN2 OBC overtemperature fault (>90°C)"
        severity: "error"
        note: "Charger too hot - check cooling system and ambient temperature. Charger will resume when cooled."

      - name: "CHARGER_CAN2_OBC_START_PREVENTED"
        code: "0x00BF"
        description: "Charger on CAN2 OBC reports start prevented (internal interlock or fault)"
        severity: "error"
        note: "Charger hardware preventing startup - may indicate internal fault or safety interlock."

      # OBC Detailed Fault Codes - CAN3 (Charger 2)
      - name: "CHARGER_CAN3_OBC_AC_INPUT_OVERVOLTAGE"
        code: "0x00C0"
        description: "Charger on CAN3 OBC reports AC input overvoltage fault (>275V AC)"
        severity: "error"
        note: "Check EVSE output voltage - should be 120V or 240V. Charger refusing to charge for safety."

      - name: "CHARGER_CAN3_OBC_TEMPERATURE_FAULT"
        code: "0x00C1"
        description: "Charger on CAN3 OBC overtemperature fault (>90°C)"
        severity: "error"
        note: "Charger too hot - check cooling system and ambient temperature. Charger will resume when cooled."

      - name: "CHARGER_CAN3_OBC_START_PREVENTED"
        code: "0x00C2"
        description: "Charger on CAN3 OBC reports start prevented (internal interlock or fault)"
        severity: "error"
        note: "Charger hardware preventing startup - may indicate internal fault or safety interlock."

      # OBC Detailed Fault Codes - CAN1 (Reserved for future hardware)
      - name: "CHARGER_CAN1_OBC_AC_INPUT_OVERVOLTAGE"
        code: "0x00C3"
        description: "Charger on CAN1 OBC reports AC input overvoltage fault (>275V AC)"
        severity: "error"
        note: "Check EVSE output voltage - should be 120V or 240V. Charger refusing to charge for safety."

      - name: "CHARGER_CAN1_OBC_TEMPERATURE_FAULT"
        code: "0x00C4"
        description: "Charger on CAN1 OBC overtemperature fault (>90°C)"
        severity: "error"
        note: "Charger too hot - check cooling system and ambient temperature. Charger will resume when cooled."

      - name: "CHARGER_CAN1_OBC_START_PREVENTED"
        code: "0x00C5"
        description: "Charger on CAN1 OBC reports start prevented (internal interlock or fault)"
        severity: "error"
        note: "Charger hardware preventing startup - may indicate internal fault or safety interlock."

      # OBC CommsStatus Fault Codes (CAN-bus-specific)
      - name: "CHARGER_CAN2_OBC_COMMS_FAULT"
        code: "0x00C6"
        description: "Charger on CAN2 OBC reports VCU communication timeout (>1s no commands received)"
        severity: "error"
        note: "OBC starving for commands - check VCU CAN transmission rate (should be <1s interval per Dilong spec) or CAN bus fault"

      - name: "CHARGER_CAN3_OBC_COMMS_FAULT"
        code: "0x00C7"
        description: "Charger on CAN3 OBC reports VCU communication timeout (>1s no commands received)"
        severity: "error"
        note: "OBC starving for commands - check VCU CAN transmission rate (should be <1s interval per Dilong spec) or CAN bus fault"

      - name: "CHARGER_CAN1_OBC_COMMS_FAULT"
        code: "0x00C8"
        description: "Charger on CAN1 OBC reports VCU communication timeout (>1s no commands received)"
        severity: "error"
        note: "OBC starving for commands - check VCU CAN transmission rate (should be <1s interval per Dilong spec) or CAN bus fault"

      # OBC HardwareFailure Bit (Standalone, CAN-bus-specific)
      - name: "CHARGER_CAN2_OBC_HARDWARE_FAILURE"
        code: "0x00C9"
        description: "Charger on CAN2 OBC reports internal hardware failure"
        severity: "error"
        note: "Separate from temperature fault - indicates internal component failure or power supply issue. Check OBC diagnostics."

      - name: "CHARGER_CAN3_OBC_HARDWARE_FAILURE"
        code: "0x00CA"
        description: "Charger on CAN3 OBC reports internal hardware failure"
        severity: "error"
        note: "Separate from temperature fault - indicates internal component failure or power supply issue. Check OBC diagnostics."

      - name: "CHARGER_CAN1_OBC_HARDWARE_FAILURE"
        code: "0x00CB"
        description: "Charger on CAN1 OBC reports internal hardware failure"
        severity: "error"
        note: "Separate from temperature fault - indicates internal component failure or power supply issue. Check OBC diagnostics."

      # SafetyMonitor Specific Failure Codes (0x00CC-0x00CF)
      - name: "CHARGING_SAFETY_J1772_TIMEOUT"
        code: "0x00CC"
        description: "SafetyMonitor: J1772 communication timeout during charging (>2000ms)"
        severity: "critical"
        note: "Charge port stopped responding during active charging - emergency shutdown triggered"

      - name: "CHARGING_SAFETY_BMS_CRITICAL_FAULT"
        code: "0x00CD"
        description: "SafetyMonitor: BMS critical fault detected during charging"
        severity: "critical"
        note: "BMS reports overvoltage, undervoltage, or communication timeout - emergency shutdown triggered"

      - name: "CHARGING_SAFETY_IMD_FAULT"
        code: "0x00CE"
        description: "SafetyMonitor: IMD isolation fault detected during charging"
        severity: "critical"
        note: "IMD reports isolation resistance below critical threshold (<100kΩ) - emergency shutdown triggered"

      - name: "CHARGING_SAFETY_EMERGENCY_SHUTDOWN"
        code: "0x00CF"
        description: "SafetyMonitor: Emergency shutdown triggered by safety fault"
        severity: "critical"
        note: "One or more safety checks failed - contactors opened, charging stopped, fault latched"

      # Charger Hardware Safety Faults (0x00D0-0x00D4)
      # These errors trigger emergency shutdown during active charging
      - name: "CHARGING_SAFETY_CHARGER_HARDWARE_FAULT"
        code: "0x00D0"
        description: "SafetyMonitor: Charger hardware failure detected (internal fault)"
        severity: "critical"
        note: "OBC reported hardware failure flag - check charger diagnostics, may require charger replacement"

      - name: "CHARGING_SAFETY_CHARGER_OVERTEMP"
        code: "0x00D1"
        description: "SafetyMonitor: Charger overtemperature protection active (>90°C)"
        severity: "critical"
        note: "OBC internal temperature exceeded safe limit - charging stopped to prevent thermal damage"

      - name: "CHARGING_SAFETY_CHARGER_INPUT_OVERVOLTAGE"
        code: "0x00D2"
        description: "SafetyMonitor: Charger input overvoltage protection (AC >275V)"
        severity: "critical"
        note: "EVSE AC voltage exceeded safe input limit - check EVSE wiring and voltage regulation"

      - name: "CHARGING_SAFETY_CHARGER_OUTPUT_OVERVOLTAGE"
        code: "0x00D3"
        description: "SafetyMonitor: Charger output overvoltage detected (>420V pack voltage)"
        severity: "critical"
        note: "OBC output voltage exceeded safe battery limit - immediate shutdown to prevent cell damage"

      - name: "CHARGING_SAFETY_CHARGER_OVERCURRENT"
        code: "0x00D4"
        description: "SafetyMonitor: Charger overcurrent detected (>25A per charger)"
        severity: "critical"
        note: "OBC output current exceeded hardware absolute maximum - emergency shutdown to prevent charger damage"

      # Charging Pre-Start Safety Gate Failures (0x00D5-0x00D9)
      # These errors prevent charging from starting (block transition to CONTACTORS_CLOSE)
      - name: "CHARGING_BLOCKED_BMS_NOT_SAFE"
        code: "0x00D5"
        description: "Charging blocked: BMS ChargeAllowed flag is false (overvoltage, undervoltage, or data fault)"
        severity: "error"
        note: "Check BMS safety status - may indicate overvoltage (>4.15V/cell), undervoltage (<2.5V/cell), excessive delta (>200mV), or faulty cell data"

      - name: "CHARGING_BLOCKED_VEHICLE_NOT_STATIONARY"
        code: "0x00D6"
        description: "Charging blocked: Vehicle is not stationary (RPM detected)"
        severity: "error"
        note: "Cannot charge while vehicle is moving - ensure RPM is below threshold and vehicle is parked"

      - name: "CHARGING_BLOCKED_NOT_NEUTRAL"
        code: "0x00D7"
        description: "Charging blocked: Ignition ON while in gear (must be OFF or in neutral)"
        severity: "error"
        note: "For safety, charging requires ignition OFF (parked) or in NEUTRAL (climate/systems active)"

      - name: "CHARGING_BLOCKED_CHARGER_TIMEOUT"
        code: "0x00D8"
        description: "Charging blocked: Charger communication timeout or hardware fault"
        severity: "error"
        note: "Charger not responding or reporting hardware failure - check CAN bus and charger power"

      # STM32 Charge Controller Fault Codes (0x00D9-0x00DD)
      # These error codes map to specific fault flags reported by the STM32 charge controller
      # See CHARGE_PORT_FAULT_* bitfield definitions in vcu_types.h
      - name: "J1772_CP_VOLTAGE_FAULT"
        code: "0x00D9"
        description: "J1772 control pilot voltage out of range (hardware fault)"
        severity: "error"
        note: "STM32 charge controller detected CP voltage outside valid thresholds - check charge port hardware"

      - name: "J1772_PP_VOLTAGE_FAULT"
        code: "0x00DA"
        description: "J1772 proximity pilot voltage out of range (hardware fault)"
        severity: "error"
        note: "STM32 charge controller detected PP voltage outside valid thresholds - check charge port hardware"

      - name: "J1772_AC_DETECTION_FAULT"
        code: "0x00DB"
        description: "J1772 AC detection circuit fault (only L1 or L2 detected, not both or neither)"
        severity: "error"
        note: "STM32 charge controller detected AC fault - check EVSE wiring and AC detection circuit"

      - name: "J1772_PWM_FAULT"
        code: "0x00DC"
        description: "J1772 PWM duty cycle or frequency invalid (hardware measurement fault)"
        severity: "error"
        note: "STM32 charge controller detected PWM measurement fault - check CP signal quality"

      - name: "J1772_VCU_KEEPALIVE_TIMEOUT"
        code: "0x00DD"
        description: "J1772 charge controller reports VCU keepalive timeout (no CAN 0x201 for >5 seconds)"
        severity: "error"
        note: "VCU must transmit CAN 0x201 keepalive every <5 seconds to maintain charge port controller operation"

      - name: "J1772_CROSS_VALIDATION_FAULT"
        code: "0x00DE"
        description: "J1772 CP/PP cross-validation failed (inconsistent state)"
        severity: "error"
        note: "STM32 charge controller detected CP and PP signals in inconsistent states - possible wiring fault"

      # Module Detection Warnings (0x00DF-0x00E0)
      # These warnings help diagnose hardware issues during system startup
      - name: "IMD_NOT_DETECTED"
        code: "0x00DF"
        description: "IMD not detected after 15 seconds - check 12V power and HV connections"
        severity: "warning"
        note: "Bender IMD should transmit ID 0x037 automatically at power-on (no wake-up message needed). Check 12V power (Pin 2), HV measurement wires (HV+, HV-, PE), and CAN termination. May indicate defective IMD or loose wiring."

      - name: "CURRENT_SENSOR_NOT_DETECTED"
        code: "0x00E0"
        description: "Current sensor not detected after 15 seconds - check 12V power and CAN connections"
        severity: "warning"
        note: "ISA Scale IVT-S current sensor should transmit ID 0x3C4 automatically at power-on. Check 12V power, CAN wiring (CANH/CANL), and CAN termination. May indicate defective sensor or loose wiring."

      # Odometer and Range Estimation (0x00E4-0x00E6)
      # Informational messages for odometer functionality and range estimation
      - name: "ODOMETER_RPM_OVERFLOW_DETECTED"
        code: "0x00E4"
        description: "Odometer RPM accumulator overflow detected - sample skipped"
        severity: "warning"
        note: "RPM accumulator exceeded safe threshold before odometer task cleared it. This may indicate odometer task not running at 1Hz or extreme RPM conditions. Distance tracking temporarily paused."

      - name: "ODOMETER_DISTANCE_SANITY_CHECK_FAILED"
        code: "0x00E5"
        description: "Odometer calculated distance exceeded plausible threshold (>100m in 1 second)"
        severity: "info"
        note: "Calculated distance sample rejected as implausible. This is normal during RPM spikes or data corruption. Odometer continues tracking with next valid sample."

      - name: "ODOMETER_RANGE_ESTIMATE_UNAVAILABLE"
        code: "0x00E6"
        description: "Range estimate unavailable - insufficient driving data (<1 km in last 4 hours)"
        severity: "info"
        note: "Range estimate requires at least 1km of driving data over the last 4 hours to calculate accurate efficiency. Continue driving to enable range estimation."

      # 12V Battery Tender (0x00E7, 0x00EC-0x00F0)
      # Automatic 12V battery maintenance during idle/standby periods
      - name: "VOLT12_TENDER_DISABLED"
        code: "0x00E7"
        description: "12V battery monitoring disabled - charge port not detected"
        severity: "warning"
        note: "12V battery voltage sensor unavailable (charge port controller timeout or not detected). Automatic 12V maintenance charging disabled. DCDC will still operate during ignition ON and HV charging."

      - name: "VOLT12_TENDER_BLOCKED_INTERLOCKS"
        code: "0x00EC"
        description: "12V battery tender blocked by safety interlocks"
        severity: "info"
        note: "Automatic 12V charging blocked due to active safety conditions (ignition ON, HV charging active, or charge port unavailable). This is normal operation - tender will resume when vehicle returns to idle state."

      - name: "VOLT12_TENDER_DCDC_UNAVAILABLE"
        code: "0x00ED"
        description: "DCDC charger not detected for 12V battery charging"
        severity: "warning"
        note: "DCDC charger module not responding via CAN bus (>1s timeout or IsDetected=0). 12V battery cannot be automatically charged. Check DCDC charger hardware, CAN bus wiring, and charger firmware. DCDC may still charge during ignition ON if hardware functional."

      - name: "VOLT12_TENDER_DCDC_NOT_RESPONDING"
        code: "0x00EE"
        description: "DCDC charger enabled but not producing voltage after 30 seconds"
        severity: "error"
        note: "DCDC command sent (DCDCEnabled=1) but 12V voltage not rising as expected after contactor settling delay. Possible hardware failure, contactors not closing, or DCDC internal fault. Check DCDC hardware, HV contactor operation, and wiring."

      - name: "VOLT12_TENDER_VOLTAGE_MEASUREMENT_FAULT"
        code: "0x00EF"
        description: "12V battery voltage reading implausible or out of range"
        severity: "warning"
        note: "Voltage reading outside physically possible range (8.0-15.5V). Indicates charge port voltage sensor fault, wiring issue, or ADC problem. 12V tender disabled until valid readings restored. Check charge port CAN messages and voltage scaling."

      - name: "VOLT12_TENDER_COOLDOWN_BYPASS_CRITICAL"
        code: "0x00F0"
        description: "Cooldown period bypassed due to critically low 12V voltage"
        severity: "warning"
        note: "Emergency bypass of 2-hour cooldown period triggered by critical voltage threshold (<11.5V). Indicates rapid voltage drop after charging (possible parasitic drain, alternator failure, or battery fault). Normal cooldown prevents slam-cycling, but critical voltage takes priority to prevent deep discharge."

      # Self-Test Framework (0x00EB)
      # Pre-RTOS hardware validation during boot sequence
      - name: "SELF_TEST_FAILED"
        code: "0x00EB"
        description: "Self-test failed during initialization - hardware validation error"
        severity: "error"
        note: "One or more hardware validation tests failed during boot sequence. Check specific test results for details (GPOD outputs, CAN bus, EEPROM). If test is non-fatal, system will continue boot with degraded functionality."

  # ============================================================================
  # DEBUG ERROR CODES (0x8000-0xFFFF)
  # ============================================================================
  # Debug errors are filtered when DebugErrorsEnabled=0 (production mode)
  # MSB=1 allows easy filtering: (errorCode >= 0x8000)
  # Default: ON for development, can be toggled via UART DEBUG_CONTROL command
  # ============================================================================
  DEBUG:
    description: "Debug-level diagnostic errors (development/troubleshooting only)"
    source: "STM32_VCU"
    errors:
      # 12V Battery Tender Debug (0x8000-0x8006)
      # Detailed interlock diagnostics for troubleshooting tender failures
      - name: "DEBUG_VOLT12_TENDER_IGNITION_ON"
        code: "0x8000"
        description: "12V tender blocked - ignition is ON"
        severity: "debug"
        note: "Ignition state preventing 12V tender from starting. This is normal - tender only operates when vehicle is parked with ignition OFF. Tender will resume when ignition turns OFF."

      - name: "DEBUG_VOLT12_TENDER_HV_CHARGING"
        code: "0x8001"
        description: "12V tender blocked - HV charging active"
        severity: "debug"
        note: "High-voltage charging in progress, blocking 12V tender. This is normal - HV charging takes priority and DCDC charges 12V during HV charge session. Tender will resume after HV charging completes."

      - name: "DEBUG_VOLT12_TENDER_CHARGEPORT_TIMEOUT"
        code: "0x8002"
        description: "12V tender blocked - charge port communication timeout"
        severity: "debug"
        note: "Charge port controller (STM32) not responding on CAN bus (>1s timeout). 12V voltage measurement unavailable. Check charge port CAN wiring, power, and firmware. Tender will resume when communication restored."

      - name: "DEBUG_VOLT12_TENDER_CHARGEPORT_NOT_DETECTED"
        code: "0x8003"
        description: "12V tender blocked - charge port not detected"
        severity: "debug"
        note: "Charge port controller not detected during 10-second detection window after boot. 12V voltage sensor unavailable. Check charge port CAN bus assignment, wiring, and power. Tender will resume if charge port detected."

      - name: "DEBUG_VOLT12_TENDER_DCDC_NULL"
        code: "0x8004"
        description: "12V tender blocked - DCDC charger pointer is NULL"
        severity: "debug"
        note: "DCDC charger not assigned in VCU configuration (vcu.Chargers.DCDCCharger == NULL). Check main.c initialization - DCDC should be assigned to one of the three charger instances. This is a firmware configuration issue."

      - name: "DEBUG_VOLT12_TENDER_DCDC_NOT_DETECTED"
        code: "0x8005"
        description: "12V tender blocked - DCDC charger not detected on CAN bus"
        severity: "debug"
        note: "DCDC charger configured but not responding on CAN bus (IsDetected=0). Check DCDC hardware, CAN wiring, and firmware. DCDC may still charge during ignition ON if hardware is functional."

      - name: "DEBUG_VOLT12_TENDER_VOLTAGE_ABOVE_THRESHOLD"
        code: "0x8006"
        description: "12V tender idle - battery voltage above start threshold"
        severity: "debug"
        note: "12V battery voltage is healthy (above configured start threshold, default 12.4V). No charging needed. Tender monitoring voltage and will start charging if voltage drops below threshold."
